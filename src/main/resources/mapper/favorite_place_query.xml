<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mycom.springboot.favorite_place.dao.FavoritePlaceDao">
    <insert id="addFavoritePlace" parameterType="com.mycom.springboot.favorite_place.dto.FavoritePlaceDto">
        INSERT INTO favorite_place (user_seq, attraction_id)
        VALUES (#{userSeq}, #{attractionId})
    </insert>

    <delete id="removeFavoritePlace">
        DELETE FROM favorite_place
        WHERE favorite_place_id = #{favoritePlaceId}
    </delete>

    <select id="getFavoritePlacesByUser" parameterType="int" resultType="com.mycom.springboot.attraction.dto.SearchDto">
        SELECT first_image, title,  addr1, latitude, longitude 
        FROM favorite_place f,  attraction_info a 
        WHERE user_seq = #{userSeq} 
        AND f.attraction_id = a.attraction_id
    </select>

    <select id="existsByUserSeqAndContentId" resultType="boolean">
        SELECT COUNT(*) > 0
        FROM favorite_place
        WHERE user_seq = #{userSeq} AND attraction_id = #{attractionId}
    </select>
</mapper>